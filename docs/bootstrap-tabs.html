<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Dynamic Tabs</h2>

  <ul class="nav nav-tabs" id="tab-list">
    <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
  </ul>

  <div class="tab-content" id="tab-content">
    <div id="home" class="tab-pane fade in active">
      <h3>List</h3>

<table class="switch-to-tab">
<tr>
<th>Name</th><th>Description</th>
</tr>
<tr>
<td>
<a href="#gen_id_1" data-toggle="tab">NewTab 1</a></td><td> Show xyz</td>
</tr>
<tr>
<td>
<a href="#gen_id_2">NewTab 2</a></td><td> Show abc</td>
</tr>
</table>

    </div>
  </div>
</div>

<script>

$(document).ready(function () {
  var $tabList = $("#tab-list");
  $tabList.on('click', 'span.close', function(event){
		event.preventDefault();
		var $tab = $(this).parent();
		var $liParent = $tab.parent()    ;
		$liParent.remove(); //remove li of tab
		$($tab.attr("href")).remove(); //remove tab content
		if ($liParent.hasClass('active')) {
			$tabList.find('li a').first().click(); // return home if needed
		}
		return false;
  });
  $(".switch-to-tab a").on('click', function(e){
    var linkId = e.target.getAttribute('href');
    var $tabWithLink=$tabList.find(`li a[href="${linkId}"]`);
    if ($tabWithLink.length) {
			$tabWithLink.click()
    } else {
			 var name = e.target.textContent;
			 var $newTab = $(`<li ><a data-toggle="tab" href="${linkId}">${name} <span class="close">Ã—</span></a></li>`);
			 $tabList.append($newTab);
			 var $newContent = $(
`<div id="${linkId.substring(1)}" class="tab-pane fade">
   <h3>${name}... ${linkId}</h3>
	<p>Spinner here, because ajax fill.</p>
</div>`);
			 $("#tab-content").append($newContent);
			 $newTab.find("a").first().click();
		}
  });

});
</script>


</body>
</html>
